<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-PAGE: ext/tinfl.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-PAGE
   </div>
   <div id="projectbrief">Resistance&#39;s Portable-Adventure-Game-Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_31cedd4509e06940f559c1ca2f722e02.html">ext</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">tinfl.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tinfl_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* tinfl.c v1.11 - public domain inflate with zlib header parsing/adler32 checking (inflate-only subset of miniz.c)</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">   See &quot;unlicense&quot; statement at the end of this file.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   Rich Geldreich &lt;richgel99@gmail.com&gt;, last updated May 20, 2011</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   Implements RFC 1950: http://www.ietf.org/rfc/rfc1950.txt and RFC 1951: http://www.ietf.org/rfc/rfc1951.txt</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   The entire decompressor coroutine is implemented in tinfl_decompress(). The other functions are optional high-level helpers.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef TINFL_HEADER_INCLUDED</span></div><div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a2297d9004da52ae1dfdd7fd9cd053f7b">    9</a></span>&#160;<span class="preprocessor">#define TINFL_HEADER_INCLUDED</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">   14</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">   15</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">signed</span> <span class="keywordtype">short</span> <a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a>;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ab88892139a542649bc9bbfa592a9d354">   16</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="tinfl_8c.html#ab88892139a542649bc9bbfa592a9d354">mz_uint16</a>;</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">   17</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a>;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">   18</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="tinfl_8c.html#acfb8b4240861332ed19136ddd7a0bba2">   19</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="tinfl_8c.html#acfb8b4240861332ed19136ddd7a0bba2">mz_uint64</a>;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#if defined(_M_IX86) || defined(_M_X64)</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// Set MINIZ_USE_UNALIGNED_LOADS_AND_STORES to 1 if integer loads and stores to unaligned addresses are acceptable on the target platform (slightly faster).</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#define MINIZ_USE_UNALIGNED_LOADS_AND_STORES 1</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Set MINIZ_LITTLE_ENDIAN to 1 if the processor is little endian.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define MINIZ_LITTLE_ENDIAN 1</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#if defined(_WIN64) || defined(__MINGW64__) || defined(_LP64) || defined(__LP64__)</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// Set MINIZ_HAS_64BIT_REGISTERS to 1 if the processor has 64-bit general purpose registers (enables 64-bit bitbuffer in inflator)</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define MINIZ_HAS_64BIT_REGISTERS 1</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// Works around MSVC&#39;s spammy &quot;warning C4127: conditional expression is constant&quot; message.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">  #define MZ_MACRO_END while (0, 0)</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a704d9384ffb047ede84426d173b656e8">   37</a></span>&#160;<span class="preprocessor">  #define MZ_MACRO_END while (0)</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// Decompression flags used by tinfl_decompress().</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// TINFL_FLAG_PARSE_ZLIB_HEADER: If set, the input has a valid zlib header and ends with an adler32 checksum (it&#39;s a valid zlib stream). Otherwise, the input is a raw deflate stream.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// TINFL_FLAG_HAS_MORE_INPUT: If set, there are more input bytes available beyond the end of the supplied input buffer. If clear, the input buffer contains all remaining input.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF: If set, the output buffer is large enough to hold the entire decompressed stream. If clear, the output buffer is at least the size of the dictionary (typically 32KB).</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// TINFL_FLAG_COMPUTE_ADLER32: Force adler-32 checksum computation of the decompressed bytes.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">enum</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">   47</a></span>&#160;  <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a> = 1,</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">   48</a></span>&#160;  <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a> = 2,</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">   49</a></span>&#160;  <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a> = 4,</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba9454c17ebc5717f8553d01ab99b8c1c9">   50</a></span>&#160;  <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a> = 8</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;};</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//  Print out the defines, if any.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">void</span> <a class="code" href="tinfl_8c.html#a83ec49e8c7a33da568ebd226819bbb56">tinflDiag</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// High level decompression functions:</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// tinfl_decompress_mem_to_heap() decompresses a block in memory to a heap block allocated via malloc().</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// On entry:</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//  pSrc_buf, src_buf_len: Pointer and size of the Deflate or zlib source data to decompress.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// On return:</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//  Function returns a pointer to the decompressed data, or NULL on failure.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//  *pOut_len will be set to the decompressed data&#39;s size, which could be larger than src_buf_len on uncompressible data.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//  The caller must free() the returned block when it&#39;s no longer needed.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keywordtype">void</span> *<a class="code" href="tinfl_8c.html#a4132a2c848f7a8b3db82735f0abb80f9">tinfl_decompress_mem_to_heap</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">size_t</span> *pOut_len, <span class="keywordtype">int</span> flags);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// tinfl_decompress_mem_to_mem() decompresses a block in memory to another block in memory.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// Returns TINFL_DECOMPRESS_MEM_TO_MEM_FAILED on failure, or the number of bytes written on success.</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="tinfl_8c.html#abc05bb1717f26edc88a010e903de04e8">   68</a></span>&#160;<span class="preprocessor">#define TINFL_DECOMPRESS_MEM_TO_MEM_FAILED ((size_t)(-1))</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="tinfl_8c.html#ac4642bb91b5abc566c6b23c0658d6995">tinfl_decompress_mem_to_mem</a>(<span class="keywordtype">void</span> *pOut_buf, <span class="keywordtype">size_t</span> out_buf_len, <span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">int</span> flags);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// tinfl_decompress_mem_to_callback() decompresses a block in memory to an internal 32KB buffer, and a user provided callback function will be called to flush the buffer.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// Returns 1 on success or 0 on failure.</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a4e4ea4a3376e8d2a996b848c8e4319df">   73</a></span>&#160;<span class="keyword">typedef</span> int (*<a class="code" href="tinfl_8c.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a>)(<span class="keyword">const</span> <span class="keywordtype">void</span>* pBuf, <span class="keywordtype">int</span> len, <span class="keywordtype">void</span> *pUser);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">int</span> <a class="code" href="tinfl_8c.html#a3e8087762c8423c4e48d1e5e01a243de">tinfl_decompress_mem_to_callback</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pIn_buf, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="tinfl_8c.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a> pPut_buf_func, <span class="keywordtype">void</span> *pPut_buf_user, <span class="keywordtype">int</span> flags);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ad5308cf24962df49c8b6a5c91bbbe05e">   76</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor_tag</a>; <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor_tag</a> <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// Max size of LZ dictionary.</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a39dc152de3351183ff8af716f0c556cb">   79</a></span>&#160;<span class="preprocessor">#define TINFL_LZ_DICT_SIZE 32768</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// Return status.</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">   82</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">   84</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">TINFL_STATUS_BAD_PARAM</a> = -3,</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">   85</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">TINFL_STATUS_ADLER32_MISMATCH</a> = -2,</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">   86</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a> = -1,</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">   87</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a> = 0,</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">   88</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a> = 1,</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">   89</a></span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a> = 2</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;} <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">// Initializes the decompressor to its initial state.</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a38425ff8609fe5fe5a9a48612e6f3e46">   93</a></span>&#160;<span class="preprocessor">#define tinfl_init(r) do { (r)-&gt;m_state = 0; } MZ_MACRO_END</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a5542a5383b30c24dc30bc2af3857a291">   94</a></span>&#160;<span class="preprocessor">#define tinfl_get_adler32(r) (r)-&gt;m_check_adler32</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Main low-level decompressor coroutine function. This is the only function actually needed for decompression. All the other functions are just high-level helpers for improved usability.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// This is a universal API, i.e. it can be used as a building block to build any desired higher level decompression API. In the limit case, it can be called once per every byte input or output.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> <a class="code" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *r, <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pIn_buf_next, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pOut_buf_start, <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pOut_buf_next, <span class="keywordtype">size_t</span> *pOut_buf_size, <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> decomp_flags);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">// Internal/private bits follow.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">enum</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64">  103</a></span>&#160;  <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64">TINFL_MAX_HUFF_TABLES</a> = 3, <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba">TINFL_MAX_HUFF_SYMBOLS_0</a> = 288, <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ac44807ea07817afa2b5e97b5bfc204fb">TINFL_MAX_HUFF_SYMBOLS_1</a> = 32, <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a534af4e11dc848dc29c16f276a6a428e">TINFL_MAX_HUFF_SYMBOLS_2</a> = 19,</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">  104</a></span>&#160;  <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a> = 10, <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> = 1 &lt;&lt; <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structtinfl__huff__table.html">  107</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">  109</a></span>&#160;  <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> m_code_size[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba">TINFL_MAX_HUFF_SYMBOLS_0</a>];</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">  110</a></span>&#160;  <a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a> m_look_up[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a>], m_tree[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba">TINFL_MAX_HUFF_SYMBOLS_0</a> * 2];</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;} <a class="code" href="structtinfl__huff__table.html">tinfl_huff_table</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#if MINIZ_HAS_64BIT_REGISTERS</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">  #define TINFL_USE_64BIT_BITBUF 1</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#if TINFL_USE_64BIT_BITBUF</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="tinfl_8c.html#acfb8b4240861332ed19136ddd7a0bba2">mz_uint64</a> <a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">  #define TINFL_BITBUF_SIZE (64)</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">  121</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> <a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>;</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a8749219bfc4c8fe35661f5c22ede4bc8">  122</a></span>&#160;<span class="preprocessor">  #define TINFL_BITBUF_SIZE (32)</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html">  125</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor_tag</a></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">  127</a></span>&#160;  <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> <a class="code" href="structtinfl__decompressor__tag.html#a89e483db0cdc8fe1f6663ad068eec049">m_state</a>, <a class="code" href="structtinfl__decompressor__tag.html#a504bc14c88dc5ad5c0425812f6e4ec4c">m_num_bits</a>, <a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a>, <a class="code" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">m_zhdr1</a>, <a class="code" href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">m_z_adler32</a>, <a class="code" href="structtinfl__decompressor__tag.html#a815f2b230ad5809549e42f29c39d3308">m_final</a>, <a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a>, <a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a>, <a class="code" href="structtinfl__decompressor__tag.html#aeb88d8d957926c1ef2855d3c5f7cce9b">m_dist</a>, <a class="code" href="structtinfl__decompressor__tag.html#ae0751d6b36c3d710f8ba83019e890a18">m_counter</a>, <a class="code" href="structtinfl__decompressor__tag.html#aeca30360d877f2a99f6d6f0e94460382">m_num_extra</a>, <a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64">TINFL_MAX_HUFF_TABLES</a>];</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html#a2d7972f0037f5244640aa6b0a049ee58">  128</a></span>&#160;  <a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a> <a class="code" href="structtinfl__decompressor__tag.html#a2d7972f0037f5244640aa6b0a049ee58">m_bit_buf</a>;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html#a8481db744b76e770f54391d76f704c34">  129</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structtinfl__decompressor__tag.html#a8481db744b76e770f54391d76f704c34">m_dist_from_out_buf_start</a>;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">  130</a></span>&#160;  <a class="code" href="structtinfl__huff__table.html">tinfl_huff_table</a> <a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64">TINFL_MAX_HUFF_TABLES</a>];</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">  131</a></span>&#160;  <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> <a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[4], <a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a>[<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba">TINFL_MAX_HUFF_SYMBOLS_0</a> + <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ac44807ea07817afa2b5e97b5bfc204fb">TINFL_MAX_HUFF_SYMBOLS_1</a> + 137];</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;};</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#endif // #ifdef TINFL_HEADER_INCLUDED</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// ------------------- End of Header: Implementation follows. (If you only want the header, define MINIZ_HEADER_FILE_ONLY.)</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#ifndef TINFL_HEADER_FILE_ONLY</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">// MZ_MALLOC, etc. are only used by the optional high-level helper functions.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#ifdef MINIZ_NO_MALLOC</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">  #define MZ_MALLOC(x) NULL</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">  #define MZ_FREE(x) x, ((void)0)</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">  #define MZ_REALLOC(p, x) NULL</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a09b9e87cb19529df25b3c3e47c9ad393">  148</a></span>&#160;<span class="preprocessor">  #define MZ_MALLOC(x) malloc(x)</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ac73e9b464ae92e51b762f496296d7582">  149</a></span>&#160;<span class="preprocessor">  #define MZ_FREE(x) free(x)</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a1420c15d77b938f459fa3e8bbd9f4c4d">  150</a></span>&#160;<span class="preprocessor">  #define MZ_REALLOC(p, x) realloc(p, x)</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="tinfl_8c.html#aed350adb9c98cc277b69a348a7478cdb">  153</a></span>&#160;<span class="preprocessor">#define MZ_MAX(a,b) (((a)&gt;(b))?(a):(b))</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="tinfl_8c.html#abd12503e988aa99a5d82179c54b1acc8">  154</a></span>&#160;<span class="preprocessor">#define MZ_MIN(a,b) (((a)&lt;(b))?(a):(b))</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">  155</a></span>&#160;<span class="preprocessor">#define MZ_CLEAR_OBJ(obj) memset(&amp;(obj), 0, sizeof(obj))</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES &amp;&amp; MINIZ_LITTLE_ENDIAN</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">  #define MZ_READ_LE16(p) *((const mz_uint16 *)(p))</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">  #define MZ_READ_LE32(p) *((const mz_uint32 *)(p))</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a12c43540bc29b7b9a89f02c4d2ce99d9">  161</a></span>&#160;<span class="preprocessor">  #define MZ_READ_LE16(p) ((mz_uint32)(((const mz_uint8 *)(p))[0]) | ((mz_uint32)(((const mz_uint8 *)(p))[1]) &lt;&lt; 8U))</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ad46ee9d5a50dd10df9c3829a93773fb6">  162</a></span>&#160;<span class="preprocessor">  #define MZ_READ_LE32(p) ((mz_uint32)(((const mz_uint8 *)(p))[0]) | ((mz_uint32)(((const mz_uint8 *)(p))[1]) &lt;&lt; 8U) | ((mz_uint32)(((const mz_uint8 *)(p))[2]) &lt;&lt; 16U) | ((mz_uint32)(((const mz_uint8 *)(p))[3]) &lt;&lt; 24U))</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">  165</a></span>&#160;<span class="preprocessor">#define TINFL_MEMCPY(d, s, l) memcpy(d, s, l)</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a7dd776de8caf03a8e44e7f0329953b68">  166</a></span>&#160;<span class="preprocessor">#define TINFL_MEMSET(p, c, l) memset(p, c, l)</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a1bf00dad2822034f9b1369579a9c98d1">  168</a></span>&#160;<span class="preprocessor">#define TINFL_CR_BEGIN switch(r-&gt;m_state) { case 0:</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">  169</a></span>&#160;<span class="preprocessor">#define TINFL_CR_RETURN(state_index, result) do { status = result; r-&gt;m_state = state_index; goto common_exit; case state_index:; } MZ_MACRO_END</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">  170</a></span>&#160;<span class="preprocessor">#define TINFL_CR_RETURN_FOREVER(state_index, result) do { for ( ; ; ) { TINFL_CR_RETURN(state_index, result); } } MZ_MACRO_END</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a99786d0af99c4433d7961581d708da51">  171</a></span>&#160;<span class="preprocessor">#define TINFL_CR_FINISH }</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// TODO: If the caller has indicated that there&#39;s no more input, and we attempt to read beyond the input buf, then something is wrong with the input because the inflator never</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">// reads ahead more than it needs to. Currently TINFL_GET_BYTE() pads the end of the stream with 0&#39;s in this scenario.</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">  175</a></span>&#160;<span class="preprocessor">#define TINFL_GET_BYTE(state_index, c) do { \</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">  if (pIn_buf_cur &gt;= pIn_buf_end) { \</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">    for ( ; ; ) { \</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">      if (decomp_flags &amp; TINFL_FLAG_HAS_MORE_INPUT) { \</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">        TINFL_CR_RETURN(state_index, TINFL_STATUS_NEEDS_MORE_INPUT); \</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">        if (pIn_buf_cur &lt; pIn_buf_end) { \</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">          c = *pIn_buf_cur++; \</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">          break; \</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">      } else { \</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">        c = 0; \</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">        break; \</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">      } \</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">  } else c = *pIn_buf_cur++; } MZ_MACRO_END</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a1f5388f745eea1a9297c8fb70277042d">  191</a></span>&#160;<span class="preprocessor">#define TINFL_NEED_BITS(state_index, n) do { mz_uint c; TINFL_GET_BYTE(state_index, c); bit_buf |= (((tinfl_bit_buf_t)c) &lt;&lt; num_bits); num_bits += 8; } while (num_bits &lt; (mz_uint)(n))</span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="tinfl_8c.html#aed4ea8f4cdcf4ad4416419dab601e7f0">  192</a></span>&#160;<span class="preprocessor">#define TINFL_SKIP_BITS(state_index, n) do { if (num_bits &lt; (mz_uint)(n)) { TINFL_NEED_BITS(state_index, n); } bit_buf &gt;&gt;= (n); num_bits -= (n); } MZ_MACRO_END</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">  193</a></span>&#160;<span class="preprocessor">#define TINFL_GET_BITS(state_index, b, n) do {  if (num_bits &lt; (mz_uint)(n)) { TINFL_NEED_BITS(state_index, n); } b = bit_buf &amp; ((1 &lt;&lt; (n)) - 1); bit_buf &gt;&gt;= (n); num_bits -= (n); } MZ_MACRO_END</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// TINFL_HUFF_BITBUF_FILL() is only used rarely, when the number of bytes remaining in the input buffer falls below 2.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// It reads just enough bytes from the input stream that are needed to decode the next Huffman code (and absolutely no more). It works by trying to fully decode a</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Huffman code by using whatever bits are currently present in the bit buffer. If this fails, it reads another byte, and tries again until it succeeds or until the</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// bit buffer contains &gt;=15 bits (deflate&#39;s max. Huffman code size).</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a134552e117c26b55d84ee80247828998">  199</a></span>&#160;<span class="preprocessor">#define TINFL_HUFF_BITBUF_FILL(state_index, pHuff) \</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">  do { \</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">    temp = (pHuff)-&gt;m_look_up[bit_buf &amp; (TINFL_FAST_LOOKUP_SIZE - 1)]; \</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">    if (temp &gt;= 0) { \</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">      code_len = temp &gt;&gt; 9; \</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">      if ((code_len) &amp;&amp; (num_bits &gt;= code_len)) \</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">      break; \</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">    } else if (num_bits &gt; TINFL_FAST_LOOKUP_BITS) { \</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">       code_len = TINFL_FAST_LOOKUP_BITS; \</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">       do { \</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">          temp = (pHuff)-&gt;m_tree[~temp + ((bit_buf &gt;&gt; code_len++) &amp; 1)]; \</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">       } while ((temp &lt; 0) &amp;&amp; (num_bits &gt;= (code_len + 1))); if (temp &gt;= 0) break; \</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">    } TINFL_GET_BYTE(state_index, c); bit_buf |= (((tinfl_bit_buf_t)c) &lt;&lt; num_bits); num_bits += 8; \</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">  } while (num_bits &lt; 15);</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">// TINFL_HUFF_DECODE() decodes the next Huffman coded symbol. It&#39;s more complex than you would initially expect because the zlib API expects the decompressor to never read</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">// beyond the final byte of the deflate stream. (In other words, when this macro wants to read another byte from the input, it REALLY needs another byte in order to fully</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// decode the next Huffman code.) Handling this properly is particularly important on raw deflate (non-zlib) streams, which aren&#39;t followed by a byte aligned adler-32.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// The slow path is only executed at the very end of the input buffer.</span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a5b7562ec245b9e07daefeae07602d7ae">  218</a></span>&#160;<span class="preprocessor">#define TINFL_HUFF_DECODE(state_index, sym, pHuff) do { \</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">  int temp; mz_uint code_len, c; \</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">  if (num_bits &lt; 15) { \</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">    if ((pIn_buf_end - pIn_buf_cur) &lt; 2) { \</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">       TINFL_HUFF_BITBUF_FILL(state_index, pHuff); \</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">    } else { \</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">       bit_buf |= (((tinfl_bit_buf_t)pIn_buf_cur[0]) &lt;&lt; num_bits) | (((tinfl_bit_buf_t)pIn_buf_cur[1]) &lt;&lt; (num_bits + 8)); pIn_buf_cur += 2; num_bits += 16; \</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">  } \</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">  if ((temp = (pHuff)-&gt;m_look_up[bit_buf &amp; (TINFL_FAST_LOOKUP_SIZE - 1)]) &gt;= 0) \</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">    code_len = temp &gt;&gt; 9, temp &amp;= 511; \</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">  else { \</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">    code_len = TINFL_FAST_LOOKUP_BITS; do { temp = (pHuff)-&gt;m_tree[~temp + ((bit_buf &gt;&gt; code_len++) &amp; 1)]; } while (temp &lt; 0); \</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">  } sym = temp; bit_buf &gt;&gt;= code_len; num_bits -= code_len; } MZ_MACRO_END</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">  233</a></span>&#160;<a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> <a class="code" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(<a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> *r, <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pIn_buf_next, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pOut_buf_start, <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pOut_buf_next, <span class="keywordtype">size_t</span> *pOut_buf_size, <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> decomp_flags)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_length_base[31] = { 3,4,5,6,7,8,9,10,11,13, 15,17,19,23,27,31,35,43,51,59, 67,83,99,115,131,163,195,227,258,0,0 };</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_length_extra[31]= { 0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0 };</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_dist_base[32] = { 1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193, 257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0};</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_dist_extra[32] = { 0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13};</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> s_length_dezigzag[19] = { 16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15 };</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> s_min_table_sizes[3] = { 257, 1, 4 };</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>; <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> num_bits, dist, counter, num_extra; <a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a> bit_buf;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pIn_buf_cur = pIn_buf_next, *<span class="keyword">const</span> pIn_buf_end = pIn_buf_next + *pIn_buf_size;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pOut_buf_cur = pOut_buf_next, *<span class="keyword">const</span> pOut_buf_end = pOut_buf_next + *pOut_buf_size;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">size_t</span> out_buf_size_mask = (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>) ? (<span class="keywordtype">size_t</span>)-1 : ((pOut_buf_next - pOut_buf_start) + *pOut_buf_size) - 1, dist_from_out_buf_start;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Ensure the output buffer&#39;s size is a power of 2, unless the output buffer is large enough to hold the entire output file (in which case it doesn&#39;t matter).</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (((out_buf_size_mask + 1) &amp; out_buf_size_mask) || (pOut_buf_next &lt; pOut_buf_start)) { *pIn_buf_size = *pOut_buf_size = 0; <span class="keywordflow">return</span> <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">TINFL_STATUS_BAD_PARAM</a>; }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  num_bits = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a504bc14c88dc5ad5c0425812f6e4ec4c">m_num_bits</a>; bit_buf = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a2d7972f0037f5244640aa6b0a049ee58">m_bit_buf</a>; dist = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aeb88d8d957926c1ef2855d3c5f7cce9b">m_dist</a>; counter = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ae0751d6b36c3d710f8ba83019e890a18">m_counter</a>; num_extra = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aeca30360d877f2a99f6d6f0e94460382">m_num_extra</a>; dist_from_out_buf_start = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a8481db744b76e770f54391d76f704c34">m_dist_from_out_buf_start</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="tinfl_8c.html#a1bf00dad2822034f9b1369579a9c98d1">TINFL_CR_BEGIN</a></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  bit_buf = num_bits = dist = counter = num_extra = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a> = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">m_zhdr1</a> = 0; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">m_z_adler32</a> = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a> = 1;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(1, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a>); <a class="code" href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(2, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">m_zhdr1</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    counter = (((r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a> * 256 + r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">m_zhdr1</a>) % 31 != 0) || (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">m_zhdr1</a> &amp; 32) || ((r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a> &amp; 15) != 8));</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!(decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>)) counter |= (((1U &lt;&lt; (8U + (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a> &gt;&gt; 4))) &gt; 32768U) || ((out_buf_size_mask + 1) &lt; (size_t)(1U &lt;&lt; (8U + (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">m_zhdr0</a> &gt;&gt; 4)))));</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (counter) { <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(36, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>); }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(3, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a815f2b230ad5809549e42f29c39d3308">m_final</a>, 3); r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a815f2b230ad5809549e42f29c39d3308">m_final</a> &gt;&gt; 1;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> == 0)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="tinfl_8c.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a>(5, num_bits &amp; 7);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">for</span> (counter = 0; counter &lt; 4; ++counter) { <span class="keywordflow">if</span> (num_bits) <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(6, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[counter], 8); <span class="keywordflow">else</span> <a class="code" href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(7, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[counter]); }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">if</span> ((counter = (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[0] | (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[1] &lt;&lt; 8))) != (<a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)(0xFFFF ^ (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[2] | (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">m_raw_header</a>[3] &lt;&lt; 8)))) { <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(39, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>); }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">while</span> ((counter) &amp;&amp; (num_bits))</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(51, dist, 8);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">while</span> (pOut_buf_cur &gt;= pOut_buf_end) { <a class="code" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(52, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>); }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        *pOut_buf_cur++ = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)dist;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        counter--;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">while</span> (counter)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordtype">size_t</span> n; <span class="keywordflow">while</span> (pOut_buf_cur &gt;= pOut_buf_end) { <a class="code" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(9, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>); }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        </div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">while</span> (pIn_buf_cur &gt;= pIn_buf_end)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          <span class="keywordflow">if</span> (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <a class="code" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(38, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(40, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        n = <a class="code" href="tinfl_8c.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>(<a class="code" href="tinfl_8c.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a>((<span class="keywordtype">size_t</span>)(pOut_buf_end - pOut_buf_cur), (<span class="keywordtype">size_t</span>)(pIn_buf_end - pIn_buf_cur)), counter);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="tinfl_8c.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(pOut_buf_cur, pIn_buf_cur, n); pIn_buf_cur += n; pOut_buf_cur += n; counter -= (<a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a>)n;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> == 3)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(10, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span> (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> == 1)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *p = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>; <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[0] = 288; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[1] = 32; <a class="code" href="tinfl_8c.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a>(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[1].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>, 5, 32);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">for</span> ( i = 0; i &lt;= 143; ++i) *p++ = 8; <span class="keywordflow">for</span> ( ; i &lt;= 255; ++i) *p++ = 9; <span class="keywordflow">for</span> ( ; i &lt;= 279; ++i) *p++ = 7; <span class="keywordflow">for</span> ( ; i &lt;= 287; ++i) *p++ = 8;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">for</span> (counter = 0; counter &lt; 3; counter++) { <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(11, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[counter], <span class="stringliteral">&quot;\05\05\04&quot;</span>[counter]); r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[counter] += s_min_table_sizes[counter]; }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[2].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>); <span class="keywordflow">for</span> (counter = 0; counter &lt; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[2]; counter++) { <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s; <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(14, s, 3); r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[2].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>[s_length_dezigzag[counter]] = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)s; }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[2] = 19;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">for</span> ( ; (int)r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> &gt;= 0; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a>--)</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordtype">int</span> tree_next, tree_cur; <a class="code" href="structtinfl__huff__table.html">tinfl_huff_table</a> *pTable;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> i, j, used_syms, total, sym_index, next_code[17], total_syms[16]; pTable = &amp;r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a>]; <a class="code" href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(total_syms); <a class="code" href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>); <a class="code" href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a>(pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        </div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a>]; ++i) total_syms[pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>[i]]++;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        used_syms = 0, total = 0; next_code[0] = next_code[1] = 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        for (i = 1; i &lt;= 15; ++i) { used_syms += total_syms[i]; next_code[i + 1] = (total = ((total + total_syms[i]) &lt;&lt; 1)); }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> ((65536 != total) &amp;&amp; (used_syms &gt; 1))</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(35, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">for</span> (tree_next = -1, sym_index = 0; sym_index &lt; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a>]; ++sym_index)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> rev_code = 0, l, cur_code, code_size = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>[sym_index]; <span class="keywordflow">if</span> (!code_size) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          cur_code = next_code[code_size]++; <span class="keywordflow">for</span> (l = code_size; l &gt; 0; l--, cur_code &gt;&gt;= 1) rev_code = (rev_code &lt;&lt; 1) | (cur_code &amp; 1);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          </div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          <span class="keywordflow">if</span> (code_size &lt;= <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>) { <a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a> k = (<a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a>)((code_size &lt;&lt; 9) | sym_index); <span class="keywordflow">while</span> (rev_code &lt; <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a>) { pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>[rev_code] = k; rev_code += (1 &lt;&lt; code_size); } <span class="keywordflow">continue</span>; }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">if</span> (0 == (tree_cur = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>[rev_code &amp; (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)])) { pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>[rev_code &amp; (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)] = (<a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a>)tree_next; tree_cur = tree_next; tree_next -= 2; }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          rev_code &gt;&gt;= (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a> - 1);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          <span class="keywordflow">for</span> (j = code_size; j &gt; (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a> + 1); j--)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            tree_cur -= ((rev_code &gt;&gt;= 1) &amp; 1);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">if</span> (!pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[-tree_cur - 1]) { pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[-tree_cur - 1] = (<a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a>)tree_next; tree_cur = tree_next; tree_next -= 2; } <span class="keywordflow">else</span> tree_cur = pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[-tree_cur - 1];</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          tree_cur -= ((rev_code &gt;&gt;= 1) &amp; 1); pTable-&gt;<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[-tree_cur - 1] = (<a class="code" href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a>)sym_index;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span> (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">m_type</a> == 2)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          <span class="keywordflow">for</span> (counter = 0; counter &lt; (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[0] + r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[1]); )</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s; <a class="code" href="tinfl_8c.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(16, dist, &amp;r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[2]); <span class="keywordflow">if</span> (dist &lt; 16) { r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a>[counter++] = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)dist; <span class="keywordflow">continue</span>; }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">if</span> ((dist == 16) &amp;&amp; (!counter))</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;              <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(17, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            num_extra = <span class="stringliteral">&quot;\02\03\07&quot;</span>[dist - 16]; <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(18, s, num_extra); s += <span class="stringliteral">&quot;\03\03\013&quot;</span>[dist - 16];</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="tinfl_8c.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a>(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a> + counter, (dist == 16) ? r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a>[counter - 1] : 0, s); counter += s;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;          }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <span class="keywordflow">if</span> ((r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[0] + r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[1]) != counter)</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(21, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          <a class="code" href="tinfl_8c.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a>, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[0]); <a class="code" href="tinfl_8c.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a>(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[1].<a class="code" href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">m_code_size</a>, r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">m_len_codes</a> + r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[0], r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">m_table_sizes</a>[1]);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">for</span> ( ; ; )</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pSrc;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        </div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">for</span> ( ; ; )</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <span class="keywordflow">if</span> (((pIn_buf_end - pIn_buf_cur) &lt; 4) || ((pOut_buf_end - pOut_buf_cur) &lt; 2))</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="tinfl_8c.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(23, counter, &amp;r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0]);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">if</span> (counter &gt;= 256)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">while</span> (pOut_buf_cur &gt;= pOut_buf_end) { <a class="code" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(24, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>); }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            *pOut_buf_cur++ = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)counter;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordtype">int</span> sym2; <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> code_len;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">#if TINFL_USE_64BIT_BITBUF</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">if</span> (num_bits &lt; 30) { bit_buf |= (((<a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="tinfl_8c.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a>(pIn_buf_cur)) &lt;&lt; num_bits); pIn_buf_cur += 4; num_bits += 32; }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span> (num_bits &lt; 15) { bit_buf |= (((<a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="tinfl_8c.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pIn_buf_cur)) &lt;&lt; num_bits); pIn_buf_cur += 2; num_bits += 16; }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">if</span> ((sym2 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>[bit_buf &amp; (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)]) &gt;= 0)</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;              code_len = sym2 &gt;&gt; 9;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;              code_len = <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>; <span class="keywordflow">do</span> { sym2 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[~sym2 + ((bit_buf &gt;&gt; code_len++) &amp; 1)]; } <span class="keywordflow">while</span> (sym2 &lt; 0);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            counter = sym2; bit_buf &gt;&gt;= code_len; num_bits -= code_len;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">if</span> (counter &amp; 256)</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#if !TINFL_USE_64BIT_BITBUF</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">if</span> (num_bits &lt; 15) { bit_buf |= (((<a class="code" href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a>)<a class="code" href="tinfl_8c.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a>(pIn_buf_cur)) &lt;&lt; num_bits); pIn_buf_cur += 2; num_bits += 16; }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> ((sym2 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">m_look_up</a>[bit_buf &amp; (<a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a> - 1)]) &gt;= 0)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;              code_len = sym2 &gt;&gt; 9;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;              code_len = <a class="code" href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a>; <span class="keywordflow">do</span> { sym2 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[0].<a class="code" href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">m_tree</a>[~sym2 + ((bit_buf &gt;&gt; code_len++) &amp; 1)]; } <span class="keywordflow">while</span> (sym2 &lt; 0);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            bit_buf &gt;&gt;= code_len; num_bits -= code_len;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            pOut_buf_cur[0] = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)counter;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">if</span> (sym2 &amp; 256)</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;              pOut_buf_cur++;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;              counter = sym2;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            pOut_buf_cur[1] = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>)sym2;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            pOut_buf_cur += 2;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;          }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> ((counter &amp;= 511) == 256) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        num_extra = s_length_extra[counter - 257]; counter = s_length_base[counter - 257];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">if</span> (num_extra) { <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> extra_bits; <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(25, extra_bits, num_extra); counter += extra_bits; }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="tinfl_8c.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a>(26, dist, &amp;r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">m_tables</a>[1]);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        num_extra = s_dist_extra[dist]; dist = s_dist_base[dist];</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (num_extra) { <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> extra_bits; <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(27, extra_bits, num_extra); dist += extra_bits; }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        dist_from_out_buf_start = pOut_buf_cur - pOut_buf_start;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> ((dist &gt; dist_from_out_buf_start) &amp;&amp; (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>))</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(37, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        pSrc = pOut_buf_start + ((dist_from_out_buf_start - dist) &amp; out_buf_size_mask);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="tinfl_8c.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a>(pOut_buf_cur, pSrc) + counter) &gt; pOut_buf_end)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          <span class="keywordflow">while</span> (counter--)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            </div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">while</span> (pOut_buf_cur &gt;= pOut_buf_end) { <a class="code" href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a>(53, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>); }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            *pOut_buf_cur++ = pOut_buf_start[(dist_from_out_buf_start++ - dist) &amp; out_buf_size_mask];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#if MINIZ_USE_UNALIGNED_LOADS_AND_STORES</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((counter &gt;= 9) &amp;&amp; (counter &lt;= dist))</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pSrc_end = pSrc + (counter &amp; ~7);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          <span class="keywordflow">do</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            </div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            ((<a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> *)pOut_buf_cur)[0] = ((<span class="keyword">const</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> *)pSrc)[0];</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            ((<a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> *)pOut_buf_cur)[1] = ((<span class="keyword">const</span> <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> *)pSrc)[1];</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            pOut_buf_cur += 8;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          } <span class="keywordflow">while</span> ((pSrc += 8) &lt; pSrc_end);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          <span class="keywordflow">if</span> ((counter &amp;= 7) &lt; 3)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span> (counter)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;              pOut_buf_cur[0] = pSrc[0];</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;              <span class="keywordflow">if</span> (counter &gt; 1)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                pOut_buf_cur[1] = pSrc[1];</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;              pOut_buf_cur += counter;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;          }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          </div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          pOut_buf_cur[0] = pSrc[0];</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          pOut_buf_cur[1] = pSrc[1];</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          pOut_buf_cur[2] = pSrc[2];</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          pOut_buf_cur += 3; pSrc += 3;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        } <span class="keywordflow">while</span> ((<span class="keywordtype">int</span>)(counter -= 3) &gt; 2);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)counter &gt; 0)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          pOut_buf_cur[0] = pSrc[0];</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)counter &gt; 1)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            pOut_buf_cur[1] = pSrc[1];</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          pOut_buf_cur += counter;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  } <span class="keywordflow">while</span> (!(r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a815f2b230ad5809549e42f29c39d3308">m_final</a> &amp; 1));</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="tinfl_8c.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a>(32, num_bits &amp; 7); <span class="keywordflow">for</span> (counter = 0; counter &lt; 4; ++counter) { <a class="code" href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a> s; <span class="keywordflow">if</span> (num_bits) <a class="code" href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a>(41, s, 8); <span class="keywordflow">else</span> <a class="code" href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a>(42, s); r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">m_z_adler32</a> = (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">m_z_adler32</a> &lt;&lt; 8) | s; }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a>(34, <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="tinfl_8c.html#a99786d0af99c4433d7961581d708da51">TINFL_CR_FINISH</a></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;common_exit:</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a504bc14c88dc5ad5c0425812f6e4ec4c">m_num_bits</a> = num_bits; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a2d7972f0037f5244640aa6b0a049ee58">m_bit_buf</a> = bit_buf; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aeb88d8d957926c1ef2855d3c5f7cce9b">m_dist</a> = dist; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#ae0751d6b36c3d710f8ba83019e890a18">m_counter</a> = counter; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#aeca30360d877f2a99f6d6f0e94460382">m_num_extra</a> = num_extra; r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a8481db744b76e770f54391d76f704c34">m_dist_from_out_buf_start</a> = dist_from_out_buf_start;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  *pIn_buf_size = pIn_buf_cur - pIn_buf_next; *pOut_buf_size = pOut_buf_cur - pOut_buf_next;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> ((decomp_flags &amp; (<a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a> | <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a>)) &amp;&amp; (status &gt;= 0))</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *ptr = pOut_buf_next; <span class="keywordtype">size_t</span> buf_len = *pOut_buf_size;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a> i, s1 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a> &amp; 0xffff, s2 = r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a> &gt;&gt; 16; <span class="keywordtype">size_t</span> block_len = buf_len % 5552;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">while</span> (buf_len)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      </div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">for</span> (i = 0; i + 7 &lt; block_len; i += 8, ptr += 8)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        s1 += ptr[0], s2 += s1; s1 += ptr[1], s2 += s1; s1 += ptr[2], s2 += s1; s1 += ptr[3], s2 += s1;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        s1 += ptr[4], s2 += s1; s1 += ptr[5], s2 += s1; s1 += ptr[6], s2 += s1; s1 += ptr[7], s2 += s1;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">for</span> ( ; i &lt; block_len; ++i) s1 += *ptr++, s2 += s1;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      s1 %= 65521U, s2 %= 65521U; buf_len -= block_len; block_len = 5552;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a> = (s2 &lt;&lt; 16) + s1; <span class="keywordflow">if</span> ((status == <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) &amp;&amp; (decomp_flags &amp; <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a>) &amp;&amp; (r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">m_check_adler32</a> != r-&gt;<a class="code" href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">m_z_adler32</a>)) status = <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">TINFL_STATUS_ADLER32_MISMATCH</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">// Higher level helper functions.</span></div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a4132a2c848f7a8b3db82735f0abb80f9">  516</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="tinfl_8c.html#a4132a2c848f7a8b3db82735f0abb80f9">tinfl_decompress_mem_to_heap</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">size_t</span> *pOut_len, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp; <span class="keywordtype">void</span> *pBuf = NULL, *pNew_buf; <span class="keywordtype">size_t</span> src_buf_ofs = 0, out_buf_capacity = 0;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  *pOut_len = 0;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="tinfl_8c.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">for</span> ( ; ; )</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">size_t</span> src_buf_size = src_buf_len - src_buf_ofs, dst_buf_size = out_buf_capacity - *pOut_len, new_out_buf_capacity;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pSrc_buf + src_buf_ofs, &amp;src_buf_size, (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pBuf, pBuf ? (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pBuf + *pOut_len : NULL, &amp;dst_buf_size,</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      (flags &amp; ~<a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>) | <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> ((status &lt; 0) || (status == <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a>))</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="tinfl_8c.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pBuf); *pOut_len = 0; <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    src_buf_ofs += src_buf_size;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    *pOut_len += dst_buf_size;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (status == <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    new_out_buf_capacity = out_buf_capacity * 2; <span class="keywordflow">if</span> (new_out_buf_capacity &lt; 128) new_out_buf_capacity = 128;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    pNew_buf = <a class="code" href="tinfl_8c.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a>(pBuf, new_out_buf_capacity);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (!pNew_buf)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="tinfl_8c.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pBuf); *pOut_len = 0; <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    pBuf = pNew_buf; out_buf_capacity = new_out_buf_capacity;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">return</span> pBuf;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="tinfl_8h.html#ac4642bb91b5abc566c6b23c0658d6995">  544</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="tinfl_8c.html#ac4642bb91b5abc566c6b23c0658d6995">tinfl_decompress_mem_to_mem</a>(<span class="keywordtype">void</span> *pOut_buf, <span class="keywordtype">size_t</span> out_buf_len, <span class="keyword">const</span> <span class="keywordtype">void</span> *pSrc_buf, <span class="keywordtype">size_t</span> src_buf_len, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp; <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status; <a class="code" href="tinfl_8c.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  status = <a class="code" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pSrc_buf, &amp;src_buf_len, (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pOut_buf, (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pOut_buf, &amp;out_buf_len, (flags &amp; ~<a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a>) | <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">return</span> (status != <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>) ? <a class="code" href="tinfl_8c.html#abc05bb1717f26edc88a010e903de04e8">TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</a> : out_buf_len;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a3e8087762c8423c4e48d1e5e01a243de">  551</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="tinfl_8c.html#a3e8087762c8423c4e48d1e5e01a243de">tinfl_decompress_mem_to_callback</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *pIn_buf, <span class="keywordtype">size_t</span> *pIn_buf_size, <a class="code" href="tinfl_8c.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a> pPut_buf_func, <span class="keywordtype">void</span> *pPut_buf_user, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordtype">int</span> result = 0;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="structtinfl__decompressor__tag.html">tinfl_decompressor</a> decomp;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a> *pDict = (<a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)<a class="code" href="tinfl_8c.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a>(<a class="code" href="tinfl_8c.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a>); <span class="keywordtype">size_t</span> in_buf_ofs = 0, dict_ofs = 0;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (!pDict)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="tinfl_8c.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a>(&amp;decomp);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">for</span> ( ; ; )</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">size_t</span> in_buf_size = *pIn_buf_size - in_buf_ofs, dst_buf_size = <a class="code" href="tinfl_8c.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - dict_ofs;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a> status = <a class="code" href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a>(&amp;decomp, (<span class="keyword">const</span> <a class="code" href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a>*)pIn_buf + in_buf_ofs, &amp;in_buf_size, pDict, pDict + dict_ofs, &amp;dst_buf_size,</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      (flags &amp; ~(<a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a> | <a class="code" href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a>)));</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    in_buf_ofs += in_buf_size;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> ((dst_buf_size) &amp;&amp; (!(*pPut_buf_func)(pDict + dict_ofs, (<span class="keywordtype">int</span>)dst_buf_size, pPut_buf_user)))</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a>)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      result = (status == <a class="code" href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    dict_ofs = (dict_ofs + dst_buf_size) &amp; (<a class="code" href="tinfl_8c.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a> - 1);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="tinfl_8c.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a>(pDict);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  *pIn_buf_size = in_buf_ofs;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="tinfl_8c.html#a83ec49e8c7a33da568ebd226819bbb56">  579</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="tinfl_8c.html#a83ec49e8c7a33da568ebd226819bbb56">tinflDiag</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  printf(<span class="stringliteral">&quot;tinflDiag()\n&quot;</span>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor">  #ifdef MINIZ_LITTLE_ENDIAN</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    printf(<span class="stringliteral">&quot;MINIZ_LITTLE_ENDIAN.\n&quot;</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">  #endif</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="preprocessor">  #ifdef MINIZ_USE_UNALIGNED_LOADS_AND_STORES</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    printf(<span class="stringliteral">&quot;MINIZ_USE_UNALIGNED_LOADS_AND_STORES.\n&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="preprocessor">  #endif</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">  #ifdef MINIZ_HAS_64BIT_REGISTERS</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    printf(<span class="stringliteral">&quot;MINIZ_HAS_64BIT_REGISTERS.\n&quot;</span>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">  #endif  </span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#endif // #ifndef TINFL_HEADER_FILE_ONLY</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">  This is free and unencumbered software released into the public domain.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">  Anyone is free to copy, modify, publish, use, compile, sell, or</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">  distribute this software, either in source code form or as a compiled</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">  binary, for any purpose, commercial or non-commercial, and by any</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">  means.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">  In jurisdictions that recognize copyright laws, the author or authors</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">  of this software dedicate any and all copyright interest in the</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">  software to the public domain. We make this dedication for the benefit</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">  of the public at large and to the detriment of our heirs and</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">  successors. We intend this dedication to be an overt act of</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">  relinquishment in perpetuity of all present and future rights to this</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">  software under copyright law.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">  IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">  OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">  OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">  For more information, please refer to &lt;http://unlicense.org/&gt;</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">*/</span></div><div class="ttc" id="tinfl_8c_html_a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1"><div class="ttname"><a href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba2eb96c68c6a8df342d8f12d7efcf96c1">TINFL_FLAG_HAS_MORE_INPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00048">tinfl.c:48</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_aeca30360d877f2a99f6d6f0e94460382"><div class="ttname"><a href="structtinfl__decompressor__tag.html#aeca30360d877f2a99f6d6f0e94460382">tinfl_decompressor_tag::m_num_extra</a></div><div class="ttdeci">mz_uint32 m_num_extra</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_a9b93b1cd46aaf29a27dfb526bd110d63"><div class="ttname"><a href="tinfl_8c.html#a9b93b1cd46aaf29a27dfb526bd110d63">TINFL_CR_RETURN_FOREVER</a></div><div class="ttdeci">#define TINFL_CR_RETURN_FOREVER(state_index, result)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00170">tinfl.c:170</a></div></div>
<div class="ttc" id="tinfl_8c_html_abc05bb1717f26edc88a010e903de04e8"><div class="ttname"><a href="tinfl_8c.html#abc05bb1717f26edc88a010e903de04e8">TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</a></div><div class="ttdeci">#define TINFL_DECOMPRESS_MEM_TO_MEM_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00068">tinfl.c:68</a></div></div>
<div class="ttc" id="tinfl_8c_html_ac4e4c006d234780922676ecc31fe1416"><div class="ttname"><a href="tinfl_8c.html#ac4e4c006d234780922676ecc31fe1416">tinfl_decompress</a></div><div class="ttdeci">tinfl_status tinfl_decompress(tinfl_decompressor *r, const mz_uint8 *pIn_buf_next, size_t *pIn_buf_size, mz_uint8 *pOut_buf_start, mz_uint8 *pOut_buf_next, size_t *pOut_buf_size, const mz_uint32 decomp_flags)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00233">tinfl.c:233</a></div></div>
<div class="ttc" id="tinfl_8c_html_a5b7562ec245b9e07daefeae07602d7ae"><div class="ttname"><a href="tinfl_8c.html#a5b7562ec245b9e07daefeae07602d7ae">TINFL_HUFF_DECODE</a></div><div class="ttdeci">#define TINFL_HUFF_DECODE(state_index, sym, pHuff)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00218">tinfl.c:218</a></div></div>
<div class="ttc" id="tinfl_8c_html_ab1a91818a39ac203d5d9f12a003e8557"><div class="ttname"><a href="tinfl_8c.html#ab1a91818a39ac203d5d9f12a003e8557">mz_uint32</a></div><div class="ttdeci">unsigned int mz_uint32</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00017">tinfl.c:17</a></div></div>
<div class="ttc" id="tinfl_8c_html_a38425ff8609fe5fe5a9a48612e6f3e46"><div class="ttname"><a href="tinfl_8c.html#a38425ff8609fe5fe5a9a48612e6f3e46">tinfl_init</a></div><div class="ttdeci">#define tinfl_init(r)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00093">tinfl.c:93</a></div></div>
<div class="ttc" id="structtinfl__huff__table_html"><div class="ttname"><a href="structtinfl__huff__table.html">tinfl_huff_table</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00107">tinfl.c:107</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_ada5c7f3627958c65b19f2791c802d43d"><div class="ttname"><a href="structtinfl__decompressor__tag.html#ada5c7f3627958c65b19f2791c802d43d">tinfl_decompressor_tag::m_type</a></div><div class="ttdeci">mz_uint32 m_type</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_a7dd776de8caf03a8e44e7f0329953b68"><div class="ttname"><a href="tinfl_8c.html#a7dd776de8caf03a8e44e7f0329953b68">TINFL_MEMSET</a></div><div class="ttdeci">#define TINFL_MEMSET(p, c, l)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00166">tinfl.c:166</a></div></div>
<div class="ttc" id="tinfl_8c_html_a1bf00dad2822034f9b1369579a9c98d1"><div class="ttname"><a href="tinfl_8c.html#a1bf00dad2822034f9b1369579a9c98d1">TINFL_CR_BEGIN</a></div><div class="ttdeci">#define TINFL_CR_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00168">tinfl.c:168</a></div></div>
<div class="ttc" id="tinfl_8c_html_a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245"><div class="ttname"><a href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55baf085740084ef23d974d043aeda6f2245">TINFL_FLAG_PARSE_ZLIB_HEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00047">tinfl.c:47</a></div></div>
<div class="ttc" id="tinfl_8c_html_ab88892139a542649bc9bbfa592a9d354"><div class="ttname"><a href="tinfl_8c.html#ab88892139a542649bc9bbfa592a9d354">mz_uint16</a></div><div class="ttdeci">unsigned short mz_uint16</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00016">tinfl.c:16</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html"><div class="ttname"><a href="structtinfl__decompressor__tag.html">tinfl_decompressor_tag</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00125">tinfl.c:125</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_aeb88d8d957926c1ef2855d3c5f7cce9b"><div class="ttname"><a href="structtinfl__decompressor__tag.html#aeb88d8d957926c1ef2855d3c5f7cce9b">tinfl_decompressor_tag::m_dist</a></div><div class="ttdeci">mz_uint32 m_dist</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_a26b0de30f3238271922e55776feacb0f"><div class="ttname"><a href="tinfl_8c.html#a26b0de30f3238271922e55776feacb0f">TINFL_GET_BYTE</a></div><div class="ttdeci">#define TINFL_GET_BYTE(state_index, c)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00175">tinfl.c:175</a></div></div>
<div class="ttc" id="structtinfl__huff__table_html_a3efb91b83b75d4b4792bee6111d80cb9"><div class="ttname"><a href="structtinfl__huff__table.html#a3efb91b83b75d4b4792bee6111d80cb9">tinfl_huff_table::m_tree</a></div><div class="ttdeci">mz_int16 m_tree[TINFL_MAX_HUFF_SYMBOLS_0 *2]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00110">tinfl.c:110</a></div></div>
<div class="ttc" id="tinfl_8c_html_a9354eca32f90733aa9bb3738c92da596"><div class="ttname"><a href="tinfl_8c.html#a9354eca32f90733aa9bb3738c92da596">mz_uint8</a></div><div class="ttdeci">unsigned char mz_uint8</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00014">tinfl.c:14</a></div></div>
<div class="ttc" id="tinfl_8c_html_a4e4ea4a3376e8d2a996b848c8e4319df"><div class="ttname"><a href="tinfl_8c.html#a4e4ea4a3376e8d2a996b848c8e4319df">tinfl_put_buf_func_ptr</a></div><div class="ttdeci">int(* tinfl_put_buf_func_ptr)(const void *pBuf, int len, void *pUser)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00073">tinfl.c:73</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7ac44807ea07817afa2b5e97b5bfc204fb"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ac44807ea07817afa2b5e97b5bfc204fb">TINFL_MAX_HUFF_SYMBOLS_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00103">tinfl.c:103</a></div></div>
<div class="ttc" id="tinfl_8c_html_aed4ea8f4cdcf4ad4416419dab601e7f0"><div class="ttname"><a href="tinfl_8c.html#aed4ea8f4cdcf4ad4416419dab601e7f0">TINFL_SKIP_BITS</a></div><div class="ttdeci">#define TINFL_SKIP_BITS(state_index, n)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00192">tinfl.c:192</a></div></div>
<div class="ttc" id="tinfl_8c_html_a99786d0af99c4433d7961581d708da51"><div class="ttname"><a href="tinfl_8c.html#a99786d0af99c4433d7961581d708da51">TINFL_CR_FINISH</a></div><div class="ttdeci">#define TINFL_CR_FINISH</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00171">tinfl.c:171</a></div></div>
<div class="ttc" id="structtinfl__huff__table_html_a6aae70a358ad8ca883a5e79e3331389d"><div class="ttname"><a href="structtinfl__huff__table.html#a6aae70a358ad8ca883a5e79e3331389d">tinfl_huff_table::m_look_up</a></div><div class="ttdeci">mz_int16 m_look_up[TINFL_FAST_LOOKUP_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00110">tinfl.c:110</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abc60f0bf72551ed7cbbf1ed9b20752ba">TINFL_MAX_HUFF_SYMBOLS_0</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00103">tinfl.c:103</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a650112828c38f327bd914ec150855c87">TINFL_FAST_LOOKUP_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00104">tinfl.c:104</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4">tinfl_status</a></div><div class="ttdeci">tinfl_status</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00082">tinfl.c:82</a></div></div>
<div class="ttc" id="tinfl_8c_html_acfb8b4240861332ed19136ddd7a0bba2"><div class="ttname"><a href="tinfl_8c.html#acfb8b4240861332ed19136ddd7a0bba2">mz_uint64</a></div><div class="ttdeci">unsigned long mz_uint64</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00019">tinfl.c:19</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a504bc14c88dc5ad5c0425812f6e4ec4c"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a504bc14c88dc5ad5c0425812f6e4ec4c">tinfl_decompressor_tag::m_num_bits</a></div><div class="ttdeci">mz_uint32 m_num_bits</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_a09b9e87cb19529df25b3c3e47c9ad393"><div class="ttname"><a href="tinfl_8c.html#a09b9e87cb19529df25b3c3e47c9ad393">MZ_MALLOC</a></div><div class="ttdeci">#define MZ_MALLOC(x)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00148">tinfl.c:148</a></div></div>
<div class="ttc" id="tinfl_8c_html_a39dc152de3351183ff8af716f0c556cb"><div class="ttname"><a href="tinfl_8c.html#a39dc152de3351183ff8af716f0c556cb">TINFL_LZ_DICT_SIZE</a></div><div class="ttdeci">#define TINFL_LZ_DICT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00079">tinfl.c:79</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a61c8d6dd2c312ee7a474ac6782e4bed9">TINFL_STATUS_BAD_PARAM</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00084">tinfl.c:84</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a8481db744b76e770f54391d76f704c34"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a8481db744b76e770f54391d76f704c34">tinfl_decompressor_tag::m_dist_from_out_buf_start</a></div><div class="ttdeci">size_t m_dist_from_out_buf_start</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00129">tinfl.c:129</a></div></div>
<div class="ttc" id="tinfl_8c_html_a5a94836eff2f4841bcdd2eb4ea3b8cc4"><div class="ttname"><a href="tinfl_8c.html#a5a94836eff2f4841bcdd2eb4ea3b8cc4">mz_int16</a></div><div class="ttdeci">signed short mz_int16</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00015">tinfl.c:15</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ad908ef7390a1643b0f0dece0d816bd64">TINFL_MAX_HUFF_TABLES</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00103">tinfl.c:103</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a4150e95aacd9bf414c6f9155263b60e8">TINFL_STATUS_NEEDS_MORE_INPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00088">tinfl.c:88</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_af3ceba45e4c8727c214c618f3987f105"><div class="ttname"><a href="structtinfl__decompressor__tag.html#af3ceba45e4c8727c214c618f3987f105">tinfl_decompressor_tag::m_tables</a></div><div class="ttdeci">tinfl_huff_table m_tables[TINFL_MAX_HUFF_TABLES]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00130">tinfl.c:130</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a7b5666f8fdd4854701ca97b6cf80b830"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a7b5666f8fdd4854701ca97b6cf80b830">tinfl_decompressor_tag::m_len_codes</a></div><div class="ttdeci">mz_uint8 m_len_codes[TINFL_MAX_HUFF_SYMBOLS_0+TINFL_MAX_HUFF_SYMBOLS_1+137]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00131">tinfl.c:131</a></div></div>
<div class="ttc" id="tinfl_8c_html_a12c43540bc29b7b9a89f02c4d2ce99d9"><div class="ttname"><a href="tinfl_8c.html#a12c43540bc29b7b9a89f02c4d2ce99d9">MZ_READ_LE16</a></div><div class="ttdeci">#define MZ_READ_LE16(p)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00161">tinfl.c:161</a></div></div>
<div class="ttc" id="structtinfl__huff__table_html_a58f8221c339e4d285e45a552c247a74b"><div class="ttname"><a href="structtinfl__huff__table.html#a58f8221c339e4d285e45a552c247a74b">tinfl_huff_table::m_code_size</a></div><div class="ttdeci">mz_uint8 m_code_size[TINFL_MAX_HUFF_SYMBOLS_0]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00109">tinfl.c:109</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a64c2f8bd81e440a3e789da4cbbc8d8fb"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a64c2f8bd81e440a3e789da4cbbc8d8fb">tinfl_decompressor_tag::m_z_adler32</a></div><div class="ttdeci">mz_uint32 m_z_adler32</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_abd12503e988aa99a5d82179c54b1acc8"><div class="ttname"><a href="tinfl_8c.html#abd12503e988aa99a5d82179c54b1acc8">MZ_MIN</a></div><div class="ttdeci">#define MZ_MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00154">tinfl.c:154</a></div></div>
<div class="ttc" id="tinfl_8c_html_a1420c15d77b938f459fa3e8bbd9f4c4d"><div class="ttname"><a href="tinfl_8c.html#a1420c15d77b938f459fa3e8bbd9f4c4d">MZ_REALLOC</a></div><div class="ttdeci">#define MZ_REALLOC(p, x)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00150">tinfl.c:150</a></div></div>
<div class="ttc" id="tinfl_8c_html_a4a70ebaf3e07c9f51d41ba0e552bad0a"><div class="ttname"><a href="tinfl_8c.html#a4a70ebaf3e07c9f51d41ba0e552bad0a">TINFL_MEMCPY</a></div><div class="ttdeci">#define TINFL_MEMCPY(d, s, l)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00165">tinfl.c:165</a></div></div>
<div class="ttc" id="tinfl_8c_html_a4195703cf0ade709ddce7f8777fc0cc2"><div class="ttname"><a href="tinfl_8c.html#a4195703cf0ade709ddce7f8777fc0cc2">mz_uint</a></div><div class="ttdeci">unsigned int mz_uint</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00018">tinfl.c:18</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3c0ca7cb0911c046d25e1ab3e525a3af">TINFL_STATUS_ADLER32_MISMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00085">tinfl.c:85</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a49583f3a8fa8eb17838e17f21c08be05">TINFL_STATUS_HAS_MORE_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00089">tinfl.c:89</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a79053ee3b4b44065d3528b07f83c1742"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a79053ee3b4b44065d3528b07f83c1742">tinfl_decompressor_tag::m_zhdr0</a></div><div class="ttdeci">mz_uint32 m_zhdr0</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_ac4642bb91b5abc566c6b23c0658d6995"><div class="ttname"><a href="tinfl_8c.html#ac4642bb91b5abc566c6b23c0658d6995">tinfl_decompress_mem_to_mem</a></div><div class="ttdeci">size_t tinfl_decompress_mem_to_mem(void *pOut_buf, size_t out_buf_len, const void *pSrc_buf, size_t src_buf_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00544">tinfl.c:544</a></div></div>
<div class="ttc" id="tinfl_8c_html_a4cccb4d20cb7fe52ed89300dcd665815"><div class="ttname"><a href="tinfl_8c.html#a4cccb4d20cb7fe52ed89300dcd665815">TINFL_GET_BITS</a></div><div class="ttdeci">#define TINFL_GET_BITS(state_index, b, n)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00193">tinfl.c:193</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4a3d9ecb5e7298395555ec061cda50644c">TINFL_STATUS_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00086">tinfl.c:86</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a2d7972f0037f5244640aa6b0a049ee58"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a2d7972f0037f5244640aa6b0a049ee58">tinfl_decompressor_tag::m_bit_buf</a></div><div class="ttdeci">tinfl_bit_buf_t m_bit_buf</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00128">tinfl.c:128</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_af030438b24a053f3a2c9ecd0546239d6"><div class="ttname"><a href="structtinfl__decompressor__tag.html#af030438b24a053f3a2c9ecd0546239d6">tinfl_decompressor_tag::m_check_adler32</a></div><div class="ttdeci">mz_uint32 m_check_adler32</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a815f2b230ad5809549e42f29c39d3308"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a815f2b230ad5809549e42f29c39d3308">tinfl_decompressor_tag::m_final</a></div><div class="ttdeci">mz_uint32 m_final</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a534af4e11dc848dc29c16f276a6a428e"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a534af4e11dc848dc29c16f276a6a428e">TINFL_MAX_HUFF_SYMBOLS_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00103">tinfl.c:103</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_ac2c9488f8d9b25bf30309b73420a2452"><div class="ttname"><a href="structtinfl__decompressor__tag.html#ac2c9488f8d9b25bf30309b73420a2452">tinfl_decompressor_tag::m_table_sizes</a></div><div class="ttdeci">mz_uint32 m_table_sizes[TINFL_MAX_HUFF_TABLES]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_aae1a31a75908924bbd96f1f50c2803c0"><div class="ttname"><a href="structtinfl__decompressor__tag.html#aae1a31a75908924bbd96f1f50c2803c0">tinfl_decompressor_tag::m_zhdr1</a></div><div class="ttdeci">mz_uint32 m_zhdr1</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_a3e8087762c8423c4e48d1e5e01a243de"><div class="ttname"><a href="tinfl_8c.html#a3e8087762c8423c4e48d1e5e01a243de">tinfl_decompress_mem_to_callback</a></div><div class="ttdeci">int tinfl_decompress_mem_to_callback(const void *pIn_buf, size_t *pIn_buf_size, tinfl_put_buf_func_ptr pPut_buf_func, void *pPut_buf_user, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00551">tinfl.c:551</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_ae0751d6b36c3d710f8ba83019e890a18"><div class="ttname"><a href="structtinfl__decompressor__tag.html#ae0751d6b36c3d710f8ba83019e890a18">tinfl_decompressor_tag::m_counter</a></div><div class="ttdeci">mz_uint32 m_counter</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_aa3d6b1b25edb9394236255bf7242f7b2"><div class="ttname"><a href="structtinfl__decompressor__tag.html#aa3d6b1b25edb9394236255bf7242f7b2">tinfl_decompressor_tag::m_raw_header</a></div><div class="ttdeci">mz_uint8 m_raw_header[4]</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00131">tinfl.c:131</a></div></div>
<div class="ttc" id="tinfl_8c_html_ac73e9b464ae92e51b762f496296d7582"><div class="ttname"><a href="tinfl_8c.html#ac73e9b464ae92e51b762f496296d7582">MZ_FREE</a></div><div class="ttdeci">#define MZ_FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00149">tinfl.c:149</a></div></div>
<div class="ttc" id="tinfl_8c_html_a9b76ea2ad5e09a1bd4a7d663745ac29e"><div class="ttname"><a href="tinfl_8c.html#a9b76ea2ad5e09a1bd4a7d663745ac29e">TINFL_CR_RETURN</a></div><div class="ttdeci">#define TINFL_CR_RETURN(state_index, result)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00169">tinfl.c:169</a></div></div>
<div class="ttc" id="tinfl_8c_html_ad46ee9d5a50dd10df9c3829a93773fb6"><div class="ttname"><a href="tinfl_8c.html#ad46ee9d5a50dd10df9c3829a93773fb6">MZ_READ_LE32</a></div><div class="ttdeci">#define MZ_READ_LE32(p)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00162">tinfl.c:162</a></div></div>
<div class="ttc" id="tinfl_8c_html_a3da1eeeef02435f2d09129914aa2928b"><div class="ttname"><a href="tinfl_8c.html#a3da1eeeef02435f2d09129914aa2928b">MZ_CLEAR_OBJ</a></div><div class="ttdeci">#define MZ_CLEAR_OBJ(obj)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00155">tinfl.c:155</a></div></div>
<div class="ttc" id="tinfl_8c_html_a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9"><div class="ttname"><a href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba086ec4df460b3a0c5085e22fd679b7d9">TINFL_FLAG_USING_NON_WRAPPING_OUTPUT_BUF</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00049">tinfl.c:49</a></div></div>
<div class="ttc" id="tinfl_8c_html_adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1"><div class="ttname"><a href="tinfl_8c.html#adf764cbdea00d65edcd07bb9953ad2b7ae20e8613820bdf626439b9265dc5e4a1">TINFL_FAST_LOOKUP_BITS</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00104">tinfl.c:104</a></div></div>
<div class="ttc" id="structtinfl__decompressor__tag_html_a89e483db0cdc8fe1f6663ad068eec049"><div class="ttname"><a href="structtinfl__decompressor__tag.html#a89e483db0cdc8fe1f6663ad068eec049">tinfl_decompressor_tag::m_state</a></div><div class="ttdeci">mz_uint32 m_state</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00127">tinfl.c:127</a></div></div>
<div class="ttc" id="tinfl_8c_html_aed350adb9c98cc277b69a348a7478cdb"><div class="ttname"><a href="tinfl_8c.html#aed350adb9c98cc277b69a348a7478cdb">MZ_MAX</a></div><div class="ttdeci">#define MZ_MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00153">tinfl.c:153</a></div></div>
<div class="ttc" id="tinfl_8c_html_a4132a2c848f7a8b3db82735f0abb80f9"><div class="ttname"><a href="tinfl_8c.html#a4132a2c848f7a8b3db82735f0abb80f9">tinfl_decompress_mem_to_heap</a></div><div class="ttdeci">void * tinfl_decompress_mem_to_heap(const void *pSrc_buf, size_t src_buf_len, size_t *pOut_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00516">tinfl.c:516</a></div></div>
<div class="ttc" id="tinfl_8c_html_af6af194c507342cda458498cd37ca418"><div class="ttname"><a href="tinfl_8c.html#af6af194c507342cda458498cd37ca418">tinfl_bit_buf_t</a></div><div class="ttdeci">mz_uint32 tinfl_bit_buf_t</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00121">tinfl.c:121</a></div></div>
<div class="ttc" id="tinfl_8c_html_a06fc87d81c62e9abb8790b6e5713c55ba9454c17ebc5717f8553d01ab99b8c1c9"><div class="ttname"><a href="tinfl_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba9454c17ebc5717f8553d01ab99b8c1c9">TINFL_FLAG_COMPUTE_ADLER32</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00050">tinfl.c:50</a></div></div>
<div class="ttc" id="tinfl_8c_html_a83ec49e8c7a33da568ebd226819bbb56"><div class="ttname"><a href="tinfl_8c.html#a83ec49e8c7a33da568ebd226819bbb56">tinflDiag</a></div><div class="ttdeci">void tinflDiag(void)</div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00579">tinfl.c:579</a></div></div>
<div class="ttc" id="tinfl_8c_html_a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042"><div class="ttname"><a href="tinfl_8c.html#a387ccd3d7a7891c9e1d6ec4f4207c8d4af9316c69027621352f435c9a343f1042">TINFL_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="tinfl_8c_source.html#l00087">tinfl.c:87</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
